<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Edgar</title>
    <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      padding: 0;
      margin: 0;
      background: #f0f0f0;
    }
    .container {
      max-width: 700px;
      margin: 32px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      padding: 24px 18px;
    }
    h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 24px;
    }
    .event-btn {
      display: inline-block;
      margin: 6px 8px 6px 0;
      padding: 12px 22px;
      background: linear-gradient(90deg, #007acc 60%, #005f99 100%);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: background 0.2s, transform 0.2s;
    }
    .event-btn:hover {
      background: linear-gradient(90deg, #005f99 60%, #007acc 100%);
      transform: translateY(-2px) scale(1.04);
    }
    .form-section {
      display: none;
      background: #fafcff;
      margin-top: 20px;
      padding: 18px 12px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.10);
    }
    input, select {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      border-radius: 7px;
      border: 1px solid #b0b0b0;
      font-size: 1rem;
      box-sizing: border-box;
    }
    button.submit {
      background: #2ecc40;
      color: white;
      margin-top: 12px;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      padding: 10px 18px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button.submit:hover {
      background: #27ae36;
    }
    .result {
      margin-top: 16px;
      font-weight: 500;
      font-size: 1.08rem;
      color: #333;
      white-space: pre-line;
    }
    label {
      font-size: 1rem;
      font-weight: 500;
    }
    @media (max-width: 600px) {
      .container {
        max-width: 98vw;
        margin: 8px auto;
        padding: 12px 4vw;
        border-radius: 8px;
      }
      h2 {
        font-size: 1.3rem;
        margin-bottom: 16px;
      }
      .event-btn {
        font-size: 0.95rem;
        padding: 10px 12px;
        border-radius: 7px;
      }
      .form-section {
        padding: 12px 4px;
        border-radius: 7px;
      }
      input, select {
        font-size: 0.98rem;
        padding: 8px;
        border-radius: 6px;
      }
      button.submit {
        font-size: 0.98rem;
        padding: 8px 12px;
        border-radius: 7px;
      }
    }
    </style>
</head>
<body>
  <div class="container">
    <h2>Edgar Calculator</h2>
    
    <!-- Event buttons -->
    <button class="event-btn" onclick="showForm('attack')">On Attack</button>
    <button class="event-btn" onclick="showForm('crit')">On Crit Attack</button>
    <button class="event-btn" onclick="showForm('defense')">On Being Attacked</button>
    <button class="event-btn" onclick="showForm('climb')">Climb/Fall</button>

    <!-- State selection -->
    <div id="statePanel" style="margin-bottom: 20px;">
        <label for="combatState"><strong>Combat State:</strong></label>
        <select id="combatState" onchange="updateState()">
            <option value="normal">Normal</option>
            <option value="mountain">Mountain</option>
            <option value="flow">Flow Of All Things</option>
            <option value="wind">Wind</option>
        </select>
        <div class="result" id="combatStateDesc"></div>
    </div>

    <!-- Attack form -->
    <div id="attack" class="form-section">
      <h3>On Attack</h3>
      <div class="result" id="attackInfo"></div>
    </div>

    <!-- Defense form -->
    <div id="defense" class="form-section">
        <h3>On Being Attacked</h3>
        <div class="result" id="defenceInfo"></div>
    </div>

    <!-- Crit form -->
    <div id="crit" class="form-section">
      <h3>On Critical Attack</h3>
      <div class="result" id="critInfo"></div>
    </div>

    <!-- Climb form -->
    <div id="climb" class="form-section">
      <h3>Climbing/Falling</h3>
      <div class="result" id="climbInfo"></div>
    </div>

  </div>

  <script>

    const CHARACTER = {
        level: 5,

        strMod: 0,
        dexMod: 3,
        conMod: 3,
        intMod: 3,
        wisMod: 2,
        chaMod: 0, // raw: -1, with ring(+1): 0

        speed: 40,
        profBonus: 3,
        armorClass: 18,
        dmgReduction: 5,
        mad: "2d6ðŸŽ²",

        reachRange: 10,
    };

    let combatStance = "normal";


    const STANCE_INFO = {
        normal: "",
        mountain: {
            title: "â›°ï¸ Mountain Stance",
            info: "",
            reaction: `Reduce Melee attack within range (${CHARACTER.reachRange}ðŸ‘£) ,lvl5: TWICE
                Reduced Damage: [MAD ${CHARACTER.mad}] + [Dex ${CHARACTER.dexMod}] + [Lvl ${CHARACTER.level}]
                ðŸª–Sentinel: if the attack is not on me, I can attack`,
            madPoint: `ðŸ”µ Unrelenting: Add [Lvl ${CHARACTER.level}] to glancing blow`,
        },
        flow: {
            title: "ðŸŒŠ Flow Of All Things",
            info: "",
            reaction: `(melee) reduce damage [MAD ${CHARACTER.mad}] + [DR ${CHARACTER.dmgReduction}]
                Retaliate: Attack normally and add the reduced to the dmg ,lvl5: TWICE`,
            madPoint: `ðŸ”µ Aggressive Flow: Retaliate Twice against the same attack`,
        },
        wind: {
            title: "ðŸ’¨ Like the Wind",
            info: `Movement Doubled
                Add Wisdom to any Dex saving throw`,
            madPoint: `ðŸ”µ Breeze: Disingage + Dash as bonus action, jump doubled`
        }
    }




    function showForm(formId) {
        // Hide all forms
        document.querySelectorAll('.form-section').forEach(f => f.style.display = "none");
        // Show selected
        document.getElementById(formId).style.display = "block";

        // on attack info
        attackInfo = `Attack Roll: [d20ðŸŽ²] + [Dex ${CHARACTER.dexMod}] + [Prof ${CHARACTER.profBonus}]
            Damage: [MAD ${CHARACTER.mad}] + [Dex ${CHARACTER.dexMod}]
        
            ðŸŸ£ Piercer: Once per turn, re-roll one damage die
            
            ðŸŸ£ BDazzle(lvl5): Once per round, when you hit a creature with a Rope dart or an Unarmed Strike,
             \tyou can spend 1 Martial Discipline Point to attempt to stun the enemy. The target must succeed on a
             \tConstitution saving throw or have the Stunned condition until the start of your next turn`;

        // on being attacked info
        defenceInfo = `Over powered if above armor+10: [${CHARACTER.armorClass + 10}]
        
            Reduce [DR ${CHARACTER.dmgReduction}] from damage
            
            ðŸŸ£ Glancing blow: once per turn, throw constitution save against attack roll, on success double DR`;

        // on crit attack info
        critInfo = `Double Damage
        
            ðŸŸ£ Piercer: Roll another damage die
            
            ðŸŸ£ Pendant: Add d6 Fire ðŸ”¥ Damage per dice`;

        // on crit attack info
        climbInfo = `lvl4: While wielding a Rope dart, you gain climbing speed equal to your normal movement speed [${CHARACTER.speed}].
            In addition, you can use your Reaction when you fall to mitigate damage you take from the fall by ðŸŽ² Dexterity ability check.`;

        document.getElementById("attackInfo").innerText = attackInfo;
        document.getElementById("defenceInfo").innerText = defenceInfo;
        document.getElementById("critInfo").innerText = critInfo;
        document.getElementById("climbInfo").innerText = climbInfo;
    }



    function updateState() {
        combatStance = document.getElementById("combatState").value;

        title = STANCE_INFO[combatStance].title
        info = STANCE_INFO[combatStance].info
        reaction = STANCE_INFO[combatStance].reaction
        madPoint = STANCE_INFO[combatStance].madPoint

        document.getElementById("combatStateDesc").innerText = `${title}\n${info}\nReaction: ${reaction}\n\n${madPoint}`;
    }

  </script>
</body>
</html>
